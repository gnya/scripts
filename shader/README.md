# toon.osl

## これはなに？

[Open Shader Language](https://docs.blender.org/manual/en/latest/render/shader_nodes/osl.html) (OSL) で記述された個人プロジェクト用のトゥーンシェーダーです<br>
Blender 3.6 の Cycles でスクリプトノードから使用します

## シェーダーへの入力

### LightStrength
光源の方向と強さ デフォルトは `(0.0, 0.0, 0.0)`

### BaseColor
基本の色　デフォルトは `#808080`

### UseBackfaceCulling
裏面を非表示にするかどうか　デフォルトは `true`

### UseHighlight
ハイライトを使うかどうか　デフォルトは `false`

### HighlightThreshold
ハイライトのしきい値　デフォルトは `0.9`

この値を下げるとハイライトが出やすくなります

### HighlightMap
ハイライトのマップ　デフォルトは `0.0`

この値はハイライトの値に加算されます

### HighlightColor
ハイライト部分に使う色　デフォルトは `#ffffff`

### UseShade
陰を使うかどうか　デフォルトは `true`

陰は光源の方向を向いていない面にできます

### UseShadow
影を使うかどうか　デフォルトは `true`

影は他の物体に光源が遮られている面にできます

### ShadowThreshold
影のしきい値　デフォルトは `0.1`

この値を下げると影が出やすくなります

### ShadowCutoff
影のカットオフ　デフォルトは `0.05`

影の境界にギザギザが出る場合この値を調節します

### ShadowMap
影のマップ　デフォルトは `1.0`

この値はディフューズの値に乗算されます

### ShadowColor
影の色　デフォルトは `#1A1A1A`

### UseGlossy
光沢を使うかどうか　デフォルトは `false`

### GlossyFactor
光沢の強さ　デフォルトは `0.5`

### MaxGlossyDistance
光沢の最大距離　デフォルトは `100.0`

この距離より遠いオブジェクトは表面に反射されません

### MaxGlossyDepth
光沢の最大深度　デフォルトは `8`

反射の回数をこの値までに制限します

### UseTransparent
透過を使うかどうか　デフォルトは `false`

### Transparency
透明度　デフォルトは `1.0`

### HighlightTransparency
ハイライトの透明度　デフォルトは `1.0`

## プロパティ
オブジェクトインデックスとマテリアルインデックスに設定する値によって<br>
影や透過などの処理を行う際の挙動を細かく設定することができます

|  | 5桁目 | 3-4桁目 | 1-2桁目 |
| :-: | :-: | :-: | :-: |
| 機能 | 影の貫通を無効 | 透過のグループID | 影のグループID |
| 値の範囲 | `0` - `1` | `0` - `99` |`0` - `99` |
| 初期値 | `0` | `0` | `0` |
| 競合する場合 | 論理和 | `0` でない方またはオブジェクトを優先 | `0` でない方またはオブジェクトを優先 |

### 影のグループID
グループのIDは `1` から `99` までの数字で `0` の場合は何もしません

同じグループのIDに設定されたもの同士は影を落としません<br>
グループのIDを設定されたオブジェクトが自身に落とす影も無効になります

### 透過のグループID
グループのIDは `1` から `99` までの数字で `0` の場合は何もしません

同じグループのIDに設定されたもの同士は互いに重なって描画されません<br>
別のグループのIDに設定されたもの同士とは重なって描画されます

### 影の貫通を無効
この設定が `1` の場合、シェーダーは表面にのみ影を落とします
